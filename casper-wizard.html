<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../casper-wizard/casper-wizard-page.html">

<dom-module id="casper-wizard">
  <template>
    <style>
      :host {
        display: block;
      }

      ::slotted(div) {
        background: yellow;
        border: 2px red solid;
        margin: 10px;
        height: 500px;
      }

      .container-tabs {
        border: 30px blue solid;
      }

      /*.buttons {
        background-color: red;
      }*/

    </style>
      
    <div class="container-tabs">
      <slot></slot>
    </div>
    
  </template>

  <script>
    /**
     * `casper-wizard`
     * Wizard a container for simple dialogs with the infamous prev-next buttons
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class CasperWizard extends Polymer.Element {
      static get is() { return 'casper-wizard'; }
      static get properties() {
        return {
          prop1: {
            type: String,
            value: 'casper-wizard'
          }
        };
      }

      ready () {
        super.ready();
        console.log("wizard ready", this);

        let navButtons = document.createElement('div');
            navButtons.className = 'navButtons';
            navButtons.innerHTML = '<paper-button class="back" raised>Back</paper-button><paper-button class="next" raised">Next</paper-button>';
            navButtons.addEventListener('click', e => this._handleClick(e));

        let closeButton = document.createElement('div');
            closeButton.className = 'closeButton';
            closeButton.innerHTML = '<a href="#"><iron-icon icon="casper-icons:cancel"></iron-icon></a>';
        
        this.shadowRoot.querySelector("casper-wizard-page").appendChild(navButtons);
        this.shadowRoot.querySelector("casper-wizard-page").appendChild(closeButton);
      }

      connectedCallback () {
        super.connectedCallback();
        console.log("wizard connectedCallback", this);
        
      }

      _handleClick(e) {
        if (hasClass(e.target, 'back')) {
            // .back clicked
            
            console.log("Back clicked");
        } else if (hasClass(e.target, 'next')) {
            // .next clicked
            
            if (this.shadowRoot.querySelector("#login").style.display = "block") {
              this.shadowRoot.querySelector("#login").style.display = "none";
              this.shadowRoot.querySelector("#uploader").style.display = "block";
            } else {
              this.shadowRoot.querySelector("#uploader").style.display = "block"
              this.shadowRoot.querySelector("#uploader").style.display = "none";
            }
            console.log("Next clicked");
        }

        function hasClass(elem, className) {
          return elem.classList.contains(className);
        }
      }

    }

    window.customElements.define(CasperWizard.is, CasperWizard);
  </script>
</dom-module>
